<!doctype html><html lang=zh-cn dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="# 问题 Service层注入Dao时， Intellij 总会以红色波浪线提示我们 1 2 @Autowired private UserDao userDao; Could not autowire. No beans of &lsquo;UserDao&rsquo; type found. Checks autowiring problems in a bean class. 尽管我们都知道 Dao 层的 Bean 实际上都是有"><title>使用MyBatis时为什么Dao层不需要@Repository</title>
<link rel=canonical href=https://heeexy.com/p/mybatis-classpathmapperscanner/><link rel=stylesheet href=/scss/style.min.8e60baf4cd3fc55968717a6e39762f4d28ed7ef6007566b6c7970ad0fe907198.css><meta property='og:title' content="使用MyBatis时为什么Dao层不需要@Repository"><meta property='og:description' content="# 问题 Service层注入Dao时， Intellij 总会以红色波浪线提示我们 1 2 @Autowired private UserDao userDao; Could not autowire. No beans of &lsquo;UserDao&rsquo; type found. Checks autowiring problems in a bean class. 尽管我们都知道 Dao 层的 Bean 实际上都是有"><meta property='og:url' content='https://heeexy.com/p/mybatis-classpathmapperscanner/'><meta property='og:site_name' content='街上的动物园'><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='java'><meta property='article:tag' content='Spring'><meta property='article:tag' content='MyBatis'><meta property='article:published_time' content='2018-04-03T17:07:46+00:00'><meta property='article:modified_time' content='2018-04-03T17:07:46+00:00'><meta name=twitter:title content="使用MyBatis时为什么Dao层不需要@Repository"><meta name=twitter:description content="# 问题 Service层注入Dao时， Intellij 总会以红色波浪线提示我们 1 2 @Autowired private UserDao userDao; Could not autowire. No beans of &lsquo;UserDao&rsquo; type found. Checks autowiring problems in a bean class. 尽管我们都知道 Dao 层的 Bean 实际上都是有"></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.setItem(e,"light")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=切换菜单>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=https://img.heeexy.com/avatar.jpg width=300 height=300 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>🍥</span></figure><div class=site-meta><h1 class=site-name><a href=/>街上的动物园</a></h1><h2 class=site-description></h2></div></header><ol class=menu id=main-menu><li><a href=/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>Home</span></a></li><li><a href=/tags><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-tag" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11 3l9 9a1.5 1.5.0 010 2l-6 6a1.5 1.5.0 01-2 0L3 11V7a4 4 0 014-4h4"/><circle cx="9" cy="9" r="2"/></svg>
<span>Tags</span></a></li><li><a href=/archives><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>Archives</span></a></li><li class=menu-bottom-section><ol class=menu></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">目录</h2><div class=widget--toc><nav id=TableOfContents><ol><li><ol><li><a href=#1-分析问题>1. 分析问题</a></li><li><a href=#2-切入源码>2. 切入源码</a><ol><li><a href=#切入点>切入点</a></li><li><a href=#doscan-扫描资源转换为-beandefinition>doScan() 扫描资源，转换为 BeanDefinition</a></li><li><a href=#对-beandefinition-的加工>对 BeanDefinition 的加工</a></li></ol></li></ol></li></ol></nav></div></section></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><div class=article-title-wrapper><h2 class=article-title><a href=/p/mybatis-classpathmapperscanner/>使用MyBatis时为什么Dao层不需要@Repository</a></h2></div><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>Apr 05, 2018</time></div></footer></div></header><section class=article-content><h1 id=问题><a href=#%e9%97%ae%e9%a2%98>#</a>
问题</h1><p>Service层注入Dao时， Intellij 总会以红色波浪线提示我们</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Autowired</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>private</span><span class=w> </span><span class=n>UserDao</span><span class=w> </span><span class=n>userDao</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>Could not autowire. No beans of &lsquo;UserDao&rsquo; type found.
Checks autowiring problems in a bean class.</p><p>尽管我们都知道 Dao 层的 Bean 实际上都是有的，并且可以设置关闭这恼人的提示，但是我们有没有想过为什么 Intellij 就找不到这个 Bean 呢？甚至有人有这种做法</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Repository</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>interface</span> <span class=nc>UserDao</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>来避免提示，但是这种做法正确么？</p><p>所以今天我们的疑问就是</p><ol><li>为什么 Dao 层不需要加 @Repository 注解，源码里到底做了什么？</li><li>加了 @Repository 注解有什么影响？</li></ol><h1 id=答案><a href=#%e7%ad%94%e6%a1%88>#</a>
答案</h1><ol><li><p>关键在于 ClassPathMapperScanner 对指定包的扫描，并且扫描过程对 Spring 原本的扫描 Bean 的步骤 &ldquo;加了料” ，Spring 本身只扫实现类，但 MyBatis 的扫描器<strong>扫了接口</strong> 。并且扫完接口之后，为接口配了个 <strong>BeanDefinition</strong> ,并且这个 bd 的 BeanClass 是 <strong>MapperFactoryBean</strong> 。</p><blockquote><p>对于 BeanDefinition 和 MapperFactoryBean 不了解的同学请查询相关资料和源码</p></blockquote></li><li><p>仅仅只能解决 Intellij 静态查找 bean 的问题，没有实际作用。即使加了注解，比如@Controller，@Service 等等，也会被 Spring 的扫描器给忽略掉，因为<strong>扫描器会过滤掉接口</strong>。</p></li></ol><h1 id=源码探索><a href=#%e6%ba%90%e7%a0%81%e6%8e%a2%e7%b4%a2>#</a>
源码探索</h1><blockquote><p>下面的源码部分如果读者提前有 MyBatis 的 Bean 的执行流程，和 Spring 的 Bean加载的相关知识就更好理解。</p></blockquote><h3 id=1-分析问题><a href=#1-%e5%88%86%e6%9e%90%e9%97%ae%e9%a2%98>#</a>
1. 分析问题</h3><p>关于为什么不需要注解就能获取到 Dao 层的 Bean，看似答案很简单，因为配置了扫描指定这个包里的 xxxDao.class 啊，比如使用注解 @MapperScan(&ldquo;com.example.dao&rdquo;)。</p><p>这个答案太过表面，觉得问题简单只是因为对 Spring 的 Bean 不熟悉。</p><p>我们何时见过 @Component 及其衍生的3个注解 @Controller、@Service、@Repository <strong>加在接口上面</strong>的？</p><p>自己测试新建个接口，上面加注解，然后找个 Controller 里 @Autowired 注入一下，项目立马会报错 NoSuchBeanDefinitionException 。</p><h3 id=2-切入源码><a href=#2-%e5%88%87%e5%85%a5%e6%ba%90%e7%a0%81>#</a>
2. 切入源码</h3><h4 id=切入点><a href=#%e5%88%87%e5%85%a5%e7%82%b9>#</a>
切入点</h4><p>既然使用注解 @MapperScan 就好使，那么我们就从这个点切入源码看一下，先找出源码中何处用了此注解，非常幸运的是，只有一处用到了此注解 ：MapperScannerRegistrar.registerBeanDefinitions() 。</p><p>并且从类名和方法名就可以很清楚的看出这个类的功能是扫描 Mapper 并注册，方法的功能就是注册 BeanDefinitions 到 Spring 中。方法的源码我就不贴了，很容易看出来是创建一个扫描器 <code>ClassPathMapperScanner</code> ，设置好一系列属性比如 Spring 的注册表之后，执行 doScan() 方法去扫描 @MapperScan 提供的包。</p><h4 id=doscan-扫描资源转换为-beandefinition><a href=#doscan-%e6%89%ab%e6%8f%8f%e8%b5%84%e6%ba%90%e8%bd%ac%e6%8d%a2%e4%b8%ba-beandefinition>#</a>
doScan() 扫描资源，转换为 BeanDefinition</h4><p>doScan() 方法也很简单，就是两步：</p><ol><li>调用父类 ClassPathBeanDefinitionScanner 的doScan()方法，也就是 Spring 扫描BeanDefinition 的方法。过程不是很重要，我们需要知道这个扫描方法的一个关键就是</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>Set</span><span class=o>&lt;</span><span class=n>BeanDefinition</span><span class=o>&gt;</span><span class=w> </span><span class=n>candidates</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>findCandidateComponents</span><span class=p>(</span><span class=n>basePackage</span><span class=p>);</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>在其中对所有的候选者使用 isCandidateComponent() 方法判断是否为符合要求的 BeanDefinition。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=n>TypeFilter</span><span class=w> </span><span class=n>tf</span><span class=w> </span><span class=p>:</span><span class=w> </span><span class=k>this</span><span class=p>.</span><span class=na>excludeFilters</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>tf</span><span class=p>.</span><span class=na>match</span><span class=p>(</span><span class=n>metadataReader</span><span class=p>,</span><span class=w> </span><span class=k>this</span><span class=p>.</span><span class=na>metadataReaderFactory</span><span class=p>))</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=k>return</span><span class=w> </span><span class=kc>false</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=n>TypeFilter</span><span class=w> </span><span class=n>tf</span><span class=w> </span><span class=p>:</span><span class=w> </span><span class=k>this</span><span class=p>.</span><span class=na>includeFilters</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>tf</span><span class=p>.</span><span class=na>match</span><span class=p>(</span><span class=n>metadataReader</span><span class=p>,</span><span class=w> </span><span class=k>this</span><span class=p>.</span><span class=na>metadataReaderFactory</span><span class=p>))</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=k>return</span><span class=w> </span><span class=n>isConditionMatch</span><span class=p>(</span><span class=n>metadataReader</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>这有两组过滤器来过滤扫描到的资源。<strong>Spring 默认的过滤器是排除掉抽象类/接口的。而MyBatis 的扫描器重新注册了过滤器，默认对接口放行。</strong></p><blockquote><p>其实还有一些其它的过滤要求，但是不影响我们本问题的探究，所以不深入解读了。</p></blockquote><p>源码读到这里，我们先找到了本文的第二个问题的答案。也就是 Spring 会忽略掉接口上面的注解，不会添加它进入 BeanDefiniiton ,也就难怪测试的时候会抛出 NoSuchBeanDefinitionException 的异常了。而 MyBatis 则会把这些接口拉过来注册BD 。</p><h4 id=对-beandefinition-的加工><a href=#%e5%af%b9-beandefinition-%e7%9a%84%e5%8a%a0%e5%b7%a5>#</a>
对 BeanDefinition 的加工</h4><p>读到这里我们可能有了更大的疑问，拿接口注册 BeanDefinition ，那获取 Bean 的时候如何去实例化这个对象啊？接口可是不能实例化出对象的啊，而且我们也没有做实现。</p><p>原来是 MyBatis 的扫描器在调用完父类的扫描方法后，对 BeanDefinition 进行了加工 processBeanDefinitions() 。其中最关键的两行代码是</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>definition</span><span class=p>.</span><span class=na>getConstructorArgumentValues</span><span class=p>().</span><span class=na>addGenericArgumentValue</span><span class=p>(</span><span class=n>definition</span><span class=p>.</span><span class=na>getBeanClassName</span><span class=p>());</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>definition</span><span class=p>.</span><span class=na>setBeanClass</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=na>mapperFactoryBean</span><span class=p>.</span><span class=na>getClass</span><span class=p>());</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>第一行，我们发现把这个<strong>接口的类名塞到了构造器参数中</strong>。</p><blockquote><p>小彩蛋，这里塞的是 String ，而我们的构造器参数其实要的是 Class 。但是 Spring 的 ConstructorResolver.autowireConstructor 中用到了 Object[] argsToUse 去做了个转换 。</p></blockquote><p>第二行，beanDefinition 的 <strong>BeanClass 被设置成了 MapperFactoryBean</strong> !</p><p>熟悉 Spring 和 MyBatis 的读者肯定一下就明白了，就是这个地方进行了"偷梁换柱&rdquo;！</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Autowired</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>private</span><span class=w> </span><span class=n>UserDao</span><span class=w> </span><span class=n>userDao</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>还是拿 UserDao 为例，我们向 Spring 容器说 &ldquo;给我来个 UserDao 的实例&rdquo;，而 Spring 根据注册时候的 BeanDefinition ，去工厂( <strong>MapperFactoryBean</strong> )里面扔了个 UserDao.class 的参数进去，工厂的 getObject() 方法给我们返回了它制造的 userDao 。</p><p>就这样，我们没有去写实现类，轻轻松松拿到了我们需要的 userDao 。</p><p>至于 <strong>MapperFactoryBean</strong> 里做了什么返回了 userDao 出来？其实就是它的 getObject 方法返回的是 DefaultSqlSession.getMapper(Class<t> type)方法，返回的是 MapperProxy 代理的类，而这个代理类的 invoke 方法并不像我们平时见到的代理中的 invoke 方法一样调用原始目标的 method.invoke ，而是去找 MapperMethod 执行了。</p><h1 id=收获><a href=#%e6%94%b6%e8%8e%b7>#</a>
收获</h1><p>这次的源码探究下来，收获的不仅仅是了解了 Dao 层 Bean 的注入，更是串起了我们最常用的 Spring 和 MyBatis ，换句话说，我们打通了从 Service 层到 Dao 层。</p><p>在以往 Debug 代码时看到的 MapperProxy，MapperMethod，我们清楚了这是从何而来，也对 MyBatis 中代理的巧妙运用更加熟悉。</p><h1 id=参考文献><a href=#%e5%8f%82%e8%80%83%e6%96%87%e7%8c%ae>#</a>
参考文献</h1><p><a class=link href=https://blog.csdn.net/java280580332/article/details/72123890 target=_blank rel=noopener>https://blog.csdn.net/java280580332/article/details/72123890</a></p><p><a class=link href=https://blog.csdn.net/mingtian625/article/details/47684271 target=_blank rel=noopener>https://blog.csdn.net/mingtian625/article/details/47684271</a></p></section><footer class=article-footer><section class=article-tags><a href=/tags/java/>Java</a>
<a href=/tags/spring/>Spring</a>
<a href=/tags/mybatis/>MyBatis</a></section><section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>相关文章</h2><div class=related-content><div class="flex article-list--tile"><article><a href=/p/mybatis_design_patterns/><div class=article-details><h2 class=article-title>MyBatis 的日志设计--适配器模式 & 工厂模式</h2></div></a></article></div></div></aside><footer class=site-footer><section class=copyright>&copy;
2017 -
2024 Heeexy</section><section class=powerby>使用 <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> 构建<br>主题 <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.25.0>Stack</a></b> 由 <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> 设计</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>